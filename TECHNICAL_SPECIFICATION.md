# Техническое задание: Редактор заметок

**Студент:** Чирьев Савелий Евгеньевич

**Группа:** 2307в2

--- 

## 1. Описание проекта

### 1.1 Название системы
Система управления заметками

### 1.2 Назначение
Система предназначена для автоматизации ведения заметок. Позволяет создавать и редактировать текстовые заметки с возможностью их отнесения к определенным пользователем классам и добавления картинки.

---

## 2. Функциональные требования

### 2.1 Основные функции системы

```markdown
# Функция 1: Регистрация пользователя
Описание:
Добавление нового пользоваетеля в систему. Пользователь вводит ФИО, контактные данные (телефон, email), дату рождения. Система автоматически генерирует уникальный код пользователя и устанавливает дату регистрации.
Входные данные:
ФИО, телефон, email, дата рождения, пароль.
Результат:
Новый пользоваетель добавлен в базу данных.
```

```markdown
# Функция 2: Удаление аккаунта пользователя
Описание:
Аккаунт пользователя существует и пользователь авторизован. Пользователь вводит пароль и подтверждает удаление аккаунта.
Входные данные:
Пароль от аккаунта.
Результат:
Пользоваетель удален из базы данных.
```

```markdown
# Функция 3: Оплата подписки
Описание:
Пользователь может оплатить годовую или месячную подписку на использование премиум заметок (количество заметок перестает быть ограниченным количеством 10 заметок).
Входные данные:
Данные карты.
Результат:
Платёж обработан, подписка продлена, создана запись в БД.
```

```markdown
# Функция 4: Создание заметки
Описание:
Пользователь создает заметку и вводит данные для нее (название, текст, категория, картинка).
Входные данные:
Текст заметки, название заметки, категория заметки, картинка.
Результат:
Создана заметка с введенными данными и сохранена в системе.
```

```markdown
# Функция 5: Редактирование заметки
Описание:
Пользователь открывает заметку и редактирует данные для нее (название, текст, категория, картинка).
Входные данные:
Текст заметки, название заметки, категория заметки, картинка.
Результат:
Отредактированная заметка с введенными данными сохранена в системе.
```

```markdown
# Функция 6: Удаление заметки
Описание:
Пользователь выбирает заметку и удаляет ее.
Входные данные:
Заметка.
Результат:
Выбранная заметка удалена из системы.
```

```markdown
# Функция 7: Создание категории
Описание:
Пользователь создает категорию и вводит данные для нее (название, цвет).
Входные данные:
Название, цвет.
Результат:
Создана категория заметок и сохранена в системе.
```

```markdown
# Функция 8: Редактирование категории
Описание:
Пользователь выбирает категорию и редактирует ее данные (название, цвет).
Входные данные:
Название, цвет.
Результат:
Отредактированная категория заметок сохранена в системе. У всех заметок с данной категорией категория меняется в соответствии с новыми данными для изменяемой категории.
```

```markdown
# Функция 9: Удаление категории
Описание:
Пользователь выбирает категорию и удаляет ее.
Входные данные:
Категория.
Результат:
Выбранная категория удалена из системы. У всех заметок с данной категорией категория становится пустой.
```

```markdown
# Функция 10: Фильтрация заметок по категории
Описание:
Пользователь выбирает категорию(ии), принадлежащие к которой(ым) заметки хочет просмотреть/изменить/удалить. Пользователь осуществляет с заметкой(ами) задуманное действие.
Входные данные:
Категория(ии).
Результат:
Отображение только заметок, принадлежащих к выбранной(ым) категориям.
```

```markdown
# Функция 11: Поиск заметки по названию
Описание:
Пользователь вводит название заметки, которую хочет просмотреть/изменить/удалить. Пользователь осуществляет с заметкой задуманное действие.
Входные данные:
Название заметки.
Результат:
Отображение только заметки с введенным пользователем названием.
```

```markdown
# Функция 12: Просмотр заметки
Описание:
Пользователь выбирает заметку и открывает ее в режиме проссмотра.
Входные данные:
Заметка.
Результат:
Открытая для просмотра заметка.
```

---

## 3. Структура базы данных

```markdown
# Таблица 1: USERS (аккаунты пользователей)

Описание:
Хранит данные об аккаунтах всех пользователей приложения.

Поля:
- `USER_ID` (INT, PK) — Уникальный код аккаунта пользователя;
- `USER_NAME` (STRING) — Никнейм пользователя;
- `USER_PASSWORD` (STRING) — Пароль от аккаунта пользователя;
- `USER_VIP` (BOOL, DEFAULT = FALSE) — Флажок для определения, оплатил ли пользователь подписку для неограниченное количество заметок;
```

```markdown
# Таблица 2: CATEGORIES (категории заметок)

Описание:
Хранит данные обо всех существующих категориях для заметок.

Поля:
- `CATEGORY_ID` (INT, PK) — Уникальный код категории;
- `CATEGORY_NAME` (STRING?) — Название для категории (если требуется);
- `CATEGORY_COLOR` (STRING) — Цвет для более хорошего визуального отличия между категориями.
```

```markdown
# Таблица 3: NOTES (заметки)

Описание:
Хранит данные обо всех существующих заметках.

Поля:
- `NOTE_ID` (INT, PK) — Уникальный код заметки;
- `NOTE_NAME` (STRING?) — Название заметки (если требуется);
- `NOTE_CATEGORY_ID` (INT?, FK → CATEGORIES) — Категория заметки (если требуется);
- `NOTE_USER_ID` (INT?, FK → USERS) — Принадлежность заметки определенному пользователю.

Связи:
- Связь один-ко-многим с таблицей `CATEGORIES` (одна категория может быть у многих заметок);
- Связь один-ко-многим с таблицей `USERS` (один пользователь может иметь много заметок).
```

```markdown
# Таблица 4: PICTURES (картинки заметок)

Описание:
Хранит данные обо всех картинках для заметок.

Поля:
- `PICTURE_ID` (INT, PK) — Уникальный код фотографии;
- `PICTURE_BINARY` (STRING, NOT NULL) — Фотография в виде нулей и единиц;
- `PICTURE_IND_NUMBER` (INT) — Порядковый номер для корректного отображения картинки при просмотре и редактировании заметки;
- `PICTURE_NOTE_ID` (INT, FK → NOTES) — То, к какой заметке принадлежит картинка.

Связи:
- Связь один-ко-многим с таблицей `NOTES` (в одной заметке может быть много картинок).
```

```markdown
# Таблица 5: TEXTS (тексты заметок)

Описание:
Хранит данные обо всех текстах для заметок.

Поля:
- `TEXT_ID` (INT, PK) — Уникальный код текста;
- `TEXT_CONTENT` (STRING) — Сам текст;
- `TEXT_IND_NUMBER` (INT) — Порядковый номер для корректного отображения текста при просмотре и редактировании заметки;
- `TEXT_NOTE_ID` (INT, FK → NOTES) — То, к какой заметке принадлежит текст.

Связи:
- Связь один-ко-многим с таблицей `NOTES` (в одной заметке может быть много текстов).
```

---

## 4. Основные формы приложения

```markdown
# Форма 1: MainWindow (Главная)

Назначение: 
Главная форма приложения для управления заметками.

Элементы управления:
- TextBlock (название формы) — название формы, чтобы пользователь понимал, где находится;
- DataGrid — отображение списка заметок из базы данных;
- TextBox (поиск) — поле для поиска заметки по названию;
- ComboBox (фильтрация)— выпадающий список для выбора отображаемых категорий.

Действия:
- Кнопка "Просмотреть заметку" — открытие NoteShowWindow для просмотра выбранной заметки;
- Кнопка "Создать заметку" — открытие NoteEditWindow для создания новой заметки;
- Кнопка "Редактировать" — открытие NoteEditWindow для редактирования выбранной заметки;
- Кнопка "Удалить" — удаление выбранной заметку после подтверждения;
- Кнопка "Аккаунт" — открытие AccountWindow для просмотра информации об аккаунте пользователя и выхода из него.
```

```markdown
# Форма 2: NoteEditWindow (Создание или редактирование заметки)

Назначение: 
Форма приложения для создания или редактирования заметки.

Элементы управления:
- TextBlock (название формы) — название формы, чтобы пользователь понимал, где находится;
- TextBox (текст заметки) — поле для ввода текста заметки, создается динамически, изначально отсутствует или присутствуют сохраненные при открытие окна через кнопку "Редактировать" формы MainWindow;
- Image (картинка заметки) — поле для отображения картинки, создается динамически, изначально отсутствует или присутствуют сохраненные при открытие окна через кнопку "Редактировать" формы MainWindow.

Действия:
- Кнопка "Добавить текст" — добавление нового TextBox для текста в заметку;
- Кнопка "Добавить картинку" — добавление новой картинки в заметку (открытие OpenFileDialog с расширениями для картинок);
- Кнопка "Удалить текст" — удаление выбранного TextBox из заметки;
- Кнопка "Удалить картинку" — удаление выбранной картинки из заметки;
- Кнопка "Сохранить" — закрытие формы с сохранением;
- Кнопка "Отмена" — закрытие формы без сохранения.
```

```markdown
# Форма 3: AccountWindow (Просмотр аккаунта и выход из него)

Назначение: 
Главная форма приложения для управления заметками.

Элементы управления:
- TextBlock (название формы) — название формы, чтобы пользователь понимал, где находится;
- TextBlock (имя пользователя) — поле для отображения имени пользователя;
- TextBlock (флажок VIP-статуса) — поле для отображения информации о том, имеет ли пользователь аккаунта доступ к созданию неограниченного количества заметок.

Действия:
- Кнопка "Выйти из аккаунта" — открытие формы AuthorizationWindow;
- Кнопка "Купить подписку" — открытие формы PaymentWindow;
- Кнопка "Назад" — закрытие формы.
```

```markdown
# Форма 4: AuthorizationWindow (Авторизация)

Назначение: 
Форма приложения для входа в существующий аккаунт.

Элементы управления:
- TextBlock (название формы) — название формы, чтобы пользователь понимал, где находится;
- TextBlock ("Имя пользователя:") — подсказка для пользователя, что нужно вводить;
- TextBox (имя пользователя) — поле для ввода имени пользователя;
- TextBlock ("Пароль:") — подсказка для пользователя, что нужно вводить;
- TextBox (пароль) — поле для ввода пароля от аккаунта.

Действия:
- Кнопка "Выйти" — закрытие формы (и полностью приложения);
- Кнопка "Войти" — открытие MainWindow;
- Кнопка "Создать аккаунт" — открытие формы CreateAccountWindow.
```

```markdown
# Форма 5: CreateAccountWindow (Создание аккаунта)

Назначение: 
Форма приложения для создания аккаунта.

Элементы управления:
- TextBlock (название формы) — название формы, чтобы пользователь понимал, где находится;
- TextBlock ("Придумайте имя пользователя:") — подсказка для пользователя, что нужно вводить;
- TextBox (имя пользователя) — поле для ввода имени пользователя;
- TextBlock ("Придумайте пароль:") — подсказка для пользователя, что нужно вводить;
- TextBox (пароль) — поле для ввода пароля от аккаунта.

Действия:
- Кнопка "Назад" — закрытие формы;
- Кнопка "Создать аккаунт" — сохранения аккаунта с введенными данными в систему и закрытие окна.
```

```markdown
# Форма 6: PaymentWindow (Оплата подписки)

Назначение: 
Форма приложения для оплаты подписки на неограниченное количество заметок.

Элементы управления:
- TextBlock (название формы) — название формы, чтобы пользователь понимал, где находится;
- TextBlock ("Номер карты:") — подсказка для пользователя, что нужно вводить;
- TextBox (номер карты) — поле для ввода номера карты;
- TextBlock ("Срок действия карты:") — подсказка для пользователя, что нужно вводить;
- TextBox (срок действия) — поле для ввода срока действия карты;
- TextBlock ("CVV:") — подсказка для пользователя, что нужно вводить;
- TextBox (CVV) — поле для ввода CVV карты;
- TextBlock ("Сумма к оплате: 100 рублей") — сумма к оплате;
- TextBlock ("Пароль от аккаунта:") — подсказка для пользователя, что нужно вводить;
- TextBox (пароль) — поле для ввода пароля от аккаунта.

Действия:
- Кнопка "Оплатить" — обработка платежа и закрытие формы;
- Кнопка "Отмена" — закрытие формы.
```

```markdown
# Форма 7: NoteShowWindow (Просмотр заметки)

Назначение: 
Форма приложения для просмотра заметки.

Элементы управления:
- TextBlock (название формы) — название формы, чтобы пользователь понимал, где находится;
- TextBox (текст заметки) — поле для ввода текста заметки, создается динамически, изначально отсутствует или присутствуют сохраненные;
- Image (картинка заметки) — поле для отображения картинки, создается динамически, изначально отсутствует или присутствуют сохраненные.

Действия:
- Кнопка "Назад" — закрытие формы;
- Кнопка "Редактировать" — открытие NoteEditWindow для редактирования открытой заметки;
```

---

## 5. Схема переходов между формами


```markdown
# При запуске приложения
Запуск → AuthorizationWindow (Авторизация)
```

```markdown
# Из AuthorizationWindow (Авторизация)
- Кнопка "Выйти" → закрытие формы (и полностью приложения);
- Кнопка "Войти" → MainWindow;
- Кнопка "Создать аккаунт" → CreateAccountWindow.
```

```markdown
# Из CreateAccountWindow (Создание аккаунта)
- Кнопка "Назад" → AuthorizationWindow;
- Кнопка "Создать аккаунт":
    Успешное создание → вывод ShowDialog об успешном создании аккаунта и открытие AuthorizationWindow;
    Неудачное создание → вывод ShowDialog о том, что не получилось создать аккаунт и добавить его в систему;
```

```markdown
# Из MainWindow (Главная)
- Кнопка "Создать заметку" → NoteEditWindow;
- Кнопка "Редактировать" → NoteEditWindow;
- Кнопка "Аккаунт" → AccountWindow;
- Кнопка "Просмотреть заметку" → NoteShowWindow.
```

```markdown
# Из NoteShowWindow (Создание или редактирование заметки)
- Кнопка "Редактировать" → NoteEditWindow;
- Кнопка "Отмена" → MainWindow.
```

```markdown
# Из NoteEditWindow (Создание или редактирование заметки)
- Кнопка "Сохранить" → NoteShowWindow;
- Кнопка "Отмена" → NoteShowWindow.
```

```markdown
# Из AccountWindow (Просмотр аккаунта и выход из него)
- Кнопка "Выйти из аккаунта" → AuthorizationWindow;
- Кнопка "Купить подписку" → PaymentWindow;
- Кнопка "Назад" — MainWindow.
```

```markdown
# Из PaymentWindow (Оплата подписки)
- Кнопка "Отмена" → AccountWindow;
- Кнопка "Оплатить":
    - Успешная оплата → вывод ShowDialog об успехе → AccountWindow;
    - Неудачная оплата → вывод ShowDialog об ошибке.
```
